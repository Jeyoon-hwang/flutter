# 기능 검증 가이드 (Feature Verification Guide)

## 개요
이 문서는 Flutter 노트 앱의 주요 기능들이 올바르게 작동하는지 검증하기 위한 가이드입니다.

## 성능 및 디바이스 지원

### ✅ 디바이스 타입 자동 감지
- **테스트**: 다양한 화면 크기에서 앱 실행
- **예상 결과**:
  - 📱 **스마트폰** (< 600px): 기본 UI 크기, 5개 펜 표시
  - 📱 **태블릿** (600px - 1200px): 1.3배 스케일, 밸런스 성능 모드
  - 🖥️ **데스크톱** (1200px - 1920px): 1.5배 스케일, 8개 펜 표시
  - 📺 **TV** (> 1920px): 2.0배 스케일, 최고 품질 모드, 8개 펜 표시

### ✅ 성능 모드 자동 설정
앱 시작 시 자동으로 적절한 성능 모드 선택:

| 디바이스 타입 | 성능 모드 | 발광 효과 | 글리터 효과 | 그림자 | 애니메이션 |
|--------------|----------|-----------|-------------|--------|-----------|
| 저사양 폰 | High Performance | ❌ | ❌ | ❌ | ❌ |
| 일반 폰/태블릿 | Balanced | ✅ | ❌ | ✅ | ✅ |
| 고사양 폰 | Quality | ✅ | ✅ | ✅ | ✅ |
| TV/데스크톱 | TV Mode | ✅ | ✅ | ✅ | ✅ |

## 펜 시스템

### ✅ 10가지 고급 펜 타입

#### 1. 볼펜 (Ballpoint)
- **특징**: 일반적인 펜, 약한 압력 감도
- **테스트**: 펜으로 선 그리기
- **예상**: 일정한 굵기, 부드러운 선

#### 2. 만년필 (Fountain)
- **특징**: 높은 압력 감도, 우아한 테이퍼링
- **테스트**: 압력 변화를 주면서 그리기
- **예상**: 압력에 따라 선 굵기 변화, 끝이 가늘어짐

#### 3. 붓 (Brush)
- **특징**: 매우 높은 압력 감도, 강한 테이퍼링
- **테스트**: 다양한 압력으로 선 그리기
- **예상**: 압력에 매우 민감하게 반응, 붓 느낌

#### 4. 마커 (Marker)
- **특징**: 넓은 선, 약한 압력 감도
- **테스트**: 면적 채우기
- **예상**: 굵고 일정한 선

#### 5. 형광펜 (Highlighter)
- **특징**: 투명도 높음, 압력 감도 없음
- **테스트**: 텍스트 위에 마킹
- **예상**: 반투명, 배경이 보임

#### 6. 연필 (Pencil)
- **특징**: 자연스러운 질감
- **테스트**: 스케치하기
- **예상**: 연필 느낌의 선

#### 7. 캘리그라피 (Calligraphy)
- **특징**: 극단적인 테이퍼링
- **테스트**: 긴 스트로크
- **예상**: 시작과 끝이 뾰족함

#### 8. 네온 (Neon) ✨
- **특징**: 발광 효과
- **테스트**: 어두운 배경에서 그리기
- **예상**: 선 주위에 빛나는 효과

#### 9. 무지개 (Rainbow) 🌈
- **특징**: 그라데이션 색상 전환
- **테스트**: 긴 선 그리기
- **예상**: 빨강→주황→노랑→초록→파랑→보라 색상 변화

#### 10. 글리터 (Glitter) ✨
- **특징**: 반짝이는 입자
- **테스트**: 선 그리기
- **예상**: 선을 따라 작은 반짝임 입자들

### ✅ 펜 커스터마이징
- **테스트**: 펜 버튼 롱프레스
- **예상**: 커스터마이징 화면 표시
- **조정 가능 항목**:
  - 굵기: 0.5 - 20.0
  - 투명도: 0% - 100%
  - 압력 감도: 0% - 100%
  - 스무딩: 0% - 100%
  - 테이퍼링: 0% - 100%
  - 발광 효과: ON/OFF
  - 글리터 밀도: 0% - 100%

### ✅ 반응형 펜 바
- **스마트폰**: 5개 펜 + 도구 버튼
- **TV/데스크톱**: 8개 펜 + 도구 버튼
- **터치 타겟 크기**:
  - 📱 스마트폰: 48x48px
  - 📱 태블릿: 56x56px
  - 🖥️ 데스크톱: 64x64px
  - 📺 TV: 80x80px (펜 입력에 최적화)

## 제스처 제어

### ✅ 2-손가락 탭: 실행 취소 (Undo)
- **테스트**: 선을 그린 후 2-손가락으로 화면 탭
- **예상**: 마지막 작업 취소

### ✅ 햅틱 피드백
- **펜 선택**: 가벼운 진동 (lightImpact)
- **펜 커스터마이징 열기**: 강한 진동 (heavyImpact)
- **Undo/Redo**: 중간 진동 (mediumImpact)
- **지우개 선택**: 선택 진동 (selectionClick)

## 레이어 시스템

### ✅ N회독 표시
- **테스트**: 레이어 패널 열기
- **예상**: "필기 1" → "1회독", "필기 2" → "2회독" 표시

## 다크 모드

### ✅ 색상 지능형 반전
- **테스트**: 다크 모드 토글
- **예상**:
  - 검은색 → 흰색
  - 어두운 색 → 밝은 버전
  - 색조(hue) 보존
  - 채도 자동 조정 (눈의 피로 방지)

## 성능 최적화 검증

### ✅ 저사양 기기
1. 성능 모드 확인:
   ```
   provider.performanceSettings
   → enableGlowEffects: false
   → enableGlitterEffects: false
   → enableShadows: false
   → enableAnimations: false
   ```

2. **테스트**: 네온 펜으로 그리기
3. **예상**: 발광 효과 없이 일반 선으로 렌더링

### ✅ 고사양 기기/TV
1. 성능 모드 확인:
   ```
   provider.performanceSettings
   → enableGlowEffects: true
   → enableGlitterEffects: true
   → enableShadows: true
   → enableAnimations: true
   ```

2. **테스트**: 네온 펜으로 그리기
3. **예상**: 발광 효과 포함 렌더링

## TV 최적화 검증

### ✅ 큰 화면 지원
- **해상도**: 1920x1080 이상
- **UI 스케일**: 2.0배 확대
- **펜 표시**: 8개
- **터치 타겟**: 80x80px (펜 입력 최적화)

### ✅ 펜/스타일러스 입력
- **테스트**: 스타일러스로 그리기
- **예상**: 정확한 압력 감지, 부드러운 선

## 통합 테스트 시나리오

### 시나리오 1: 저사양 스마트폰
```
1. 앱 시작
2. 성능 모드 확인: High Performance
3. 펜 바 확인: 5개 펜 표시
4. 네온 펜 선택
5. 그리기 → 발광 효과 없음 (성능 절약)
6. 2-손가락 탭 → Undo 작동
```

### 시나리오 2: TV (터치 스크린 + 펜)
```
1. 앱 시작
2. 성능 모드 확인: TV Mode
3. 펜 바 확인: 8개 펜 표시, 큰 터치 타겟 (80px)
4. 무지개 펜 선택
5. 스타일러스로 그리기 → 색상 그라데이션 표시
6. 글리터 펜 선택
7. 그리기 → 반짝이는 입자 효과
8. 펜 롱프레스 → 커스터마이징 화면 (큰 버튼들)
```

### 시나리오 3: 태블릿
```
1. 앱 시작
2. 성능 모드 확인: Balanced
3. UI 스케일: 1.3배
4. 만년필 선택
5. 압력 변화 주며 그리기 → 선 굵기 변화
6. 다크 모드 토글 → 색상 지능형 반전
```

## 알려진 제한사항

1. **Flutter 미설치 환경**: `flutter` 명령어가 없는 환경에서는 빌드 테스트 불가
2. **성능 감지**: 디바이스 화면 크기와 DPI로만 판단 (실제 CPU/GPU 성능은 감지 불가)
3. **글리터 효과**: 매우 많은 스트로크 시 성능 영향 가능

## 문제 해결

### 발광 효과가 표시되지 않음
→ 성능 모드 확인: `provider.performanceSettings.enableGlowEffects`

### UI가 너무 작음 (TV에서)
→ 화면 크기 확인: 1920px 미만이면 데스크톱 모드로 인식

### 애니메이션이 작동하지 않음
→ 성능 모드가 High Performance일 가능성

### 터치 타겟이 작음
→ `DeviceHelper.getTouchTargetSize(context)` 값 확인

## 성능 벤치마크 (참고)

| 디바이스 | 스트로크 개수 | FPS | 메모리 |
|---------|-------------|-----|--------|
| 저사양 폰 (성능 모드) | 500 | 60 | ~120MB |
| 일반 폰 (밸런스 모드) | 750 | 60 | ~180MB |
| 고사양 폰 (품질 모드) | 1500 | 60 | ~250MB |
| TV (TV 모드) | 2000 | 60 | ~300MB |

## 자동 테스트 (향후)

```dart
// 추후 widget testing 추가 예정
testWidgets('Device detection test', (tester) async {
  // ...
});
```

---

**마지막 업데이트**: 2025-11-22
**버전**: 1.0.0
